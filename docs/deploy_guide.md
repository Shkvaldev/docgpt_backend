# Деплой

## Порядок установки

0) Деплой осуществляется при помощи **Docker Compose**. Поэтому сначала нужно его установить.

1) Далее нужно просто склонировать репозиторий и перейти в папку с проектом:

```bash
git clone <репозиторий>
cd <имя проекта>
```

2) Теперь скопируем `.env.example` и определим в нём нужные переменные:

```bash
cp .env.example .env
```

3) Далее запускаем базу данных и применяем миграции:

```bash
sudo docker compose up -d db

python3 -m venv .venv
source .venv/bin/activate
pip install -r api/requirements.txt

alembic upgrade head
```

4) Теперь поднимаем всё остальное:

```bash
sudo docker compose up -d
```

## Решение проблем

- После нескольких запусков через docker стало заканчиваться место на диске

> **Ответ**: Возможно дело в том, что docker накапливает ненужный кэш сборки - воспользуйтесь `docker system df` чтобы проверить это.

- Нет соединения с БД при запуске через docker

> **Ответ**: При тестовых запусках на локальной машине возникает такая проблема. Для починки нужно: использовать `ip a` чтобы узнать локальный ip и внести его в .env
